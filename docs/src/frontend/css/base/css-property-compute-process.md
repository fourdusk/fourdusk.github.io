---
title: CSS 属性值计算过程
description: CSS 属性值的计算过程可以分为以下 4 个步骤：1、确定声明值；2、处理层叠冲突；3、使用继承；4、应用默认值。
tags:
  - CSS
injectDocBefore: true
---

## 1. 确定声明值

所谓声明值就是作者自己所书写的 CSS 样式，另外，除了作者样式表，一般浏览器还会存在“用户代理样式表”，也就是浏览器内置了一套样式表。

## 2. 处理层叠冲突

在确定声明值时，可能出现一种情况，那就是声明的样式规则发生了冲突。

此时会进入解决层叠冲突的流程。而这一步又可以细分为下面这三个步骤：

- 比较源的重要性
- 比较优先级
- 比较次序

### 比较源的重要性

当不同的 CSS 样式来源拥有相同的声明时，此时就会根据样式表来源的重要性来确定应用哪一条样式规则。而样式表的源有 3 种：

- 网页的作者可以定义文档的样式，这是最常见的样式表，称之为**页面作者样式**。

- 浏览器会有一个基本的样式表来给任何网页设置默认样式。这些样式称之为**用户代理样式**。

- 浏览器的用户，可以使用自定义样式表定制使用体验，称之为**用户样式**。

对应的重要性顺序依次为：页面作者样式 > 用户样式 > 用户代理样式

### 比较优先级

如果是在同一个源中有样式声明冲突，此时就会进行样式声明的优先级比较。优先级顺序：

- 重要性 (!important)
- 内联样式
- ID 选择器
- 类选择器
- 标签选择器
- 通用选择器 (\*)

### 比较次序

如果样式声明既是同源，优先级也相同。此时就会进入第三个步骤，比较样式声明的次序。后声明的样式会覆盖先声明的。

## 3. 使用继承

如果元素的某个样式属性没有被显式地声明，则浏览器会检查其父元素是否有该属性的值，如果有，则将该值继承给子元素。可继承的属性包括：

- 字体系列 (font-family)
- 字体大小 (font-size)
- 字体样式 (font-style)
- 字体粗细 (font-weight)
- 文本颜色 (color)
- 文本对齐方式 (text-align)
- 文本缩进 (text-indent)
- 文本转换 (text-transform)
- 行高 (line-height)
- 等等

## 4. 应用默认值

如果元素的某个属性没有被显式地声明，也没有可以继承的，则浏览器会应用该属性的默认值。

## 5. 示例

```html
<html>
  <head>
    <style>
      .box {
        color: red;
      }
    </style>
  </head>
  <body>
    <div class="box">
      <a href="">hello</a>
      <p>world</p>
    </div>
  </body>
</html>
```

结果: `a` 元素文本是蓝色 (用户代理样式)，`p` 元素文本是红色 (继承自 `div`)
